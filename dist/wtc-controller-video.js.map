{"version":3,"sources":["../src/wtc-controller-video.js"],"names":["Video","element","options","isVideo","console","warn","fullscreen","getAttribute","onLoad","extend","wrapper","document","createElement","appendChild","addClass","parent","parentNode","log","el","tagName","toLowerCase","getTagName","item","callback","videoTag","readyState","HAVE_ENOUGH_DATA","handler","removeEventListener","addEventListener","load","registerController","instanciateAll"],"mappings":";;;;;;;;AASA;;;;AACA;;;;;;;;;;+eAVA;;;;;;;;;;;IAYMA,K;;;AACJ,iBAAaC,OAAb,EAAoC;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AAGlC;AAHkC,8GAC5BD,OAD4B;;AAIlC,QAAI,CAACD,MAAMG,OAAN,CAAcF,OAAd,CAAL,EAA6B;AAC3BG,cAAQC,IAAR,CAAa,aAAb,EAA4BJ,OAA5B,EAAqC,oBAArC;AACA;AACD;;AAED,UAAKC,OAAL,GAAe;AACbI,kBAAa,MAAKL,OAAL,CAAaM,YAAb,CAA0B,iBAA1B,KAAgD,MAAjD,GAA2D,IAA3D,GAAkE,KADjE;AAEbC,cAAQ;AAFK,KAAf;;AAKA,QAAIN,OAAJ,EAAa;AACX,YAAKA,OAAL,GAAe,4BAAGO,MAAH,CAAU,MAAKP,OAAf,EAAwBA,OAAxB,CAAf;AACD;;AAED,UAAKQ,OAAL,GAAeC,SAASC,aAAT,CAAuB,KAAvB,CAAf;AACA,UAAKF,OAAL,CAAaG,WAAb,CAAyB,MAAKZ,OAA9B;AACA,gCAAGa,QAAH,CAAY,eAAZ,EAA6B,MAAKJ,OAAlC;;AAEA,QAAIK,SAAS,MAAKd,OAAL,CAAae,UAA1B;AACAZ,YAAQa,GAAR,CAAYF,MAAZ;AACA;AAxBkC;AAyBnC;;;;+BAEiBG,E,EAAI;AACpB,aAAOA,GAAGC,OAAH,CAAWC,WAAX,EAAP;AACD;;;4BAEcF,E,EAAI;AACjB,aAAQlB,MAAMqB,UAAN,CAAiBH,EAAjB,MAAyB,OAA1B,GAAqC,IAArC,GAA4C,KAAnD;AACD;;;4BAEcI,I,EAAMC,Q,EAAU;AAC7B,UAAIC,WAAWF,IAAf;;AAEA,UAAIC,QAAJ,EAAc;AACZ,YAAIC,SAASC,UAAT,IAAuBD,SAASE,gBAApC,EAAsD;AACpDH,mBAASD,IAAT;AACD,SAFD,MAGK;AAAA;AACH,gBAAIK,UAAU,SAAVA,OAAU,GAAU;AACtBJ,uBAASD,IAAT;AACAE,uBAASI,mBAAT,CAA6B,SAA7B,EAAwCD,OAAxC;AACD,aAHD;;AAKAH,qBAASK,gBAAT,CAA0B,SAA1B,EAAqCF,OAArC;AANG;AAOJ;AACF;;AAEDH,eAASM,IAAT;AACD;;;;;;AAGH,yCAAmBC,kBAAnB,CAAsC/B,KAAtC,EAA6C,OAA7C;;kBAEeA,K;;;AAEf,yCAAmBgC,cAAnB","file":"wtc-controller-video.js","sourcesContent":["/**\n * Video\n * A class to handle the different browser support for videos, specially fullscreen ambient videos.\n *\n * @author Marlon Marcello <marlon@wethecollective.com>\n * @version 0.1.0\n * @requirements wtc-utility-helpers, wtc-controller-element\n * @created Jan 25, 2017\n */\nimport _u from 'wtc-utility-helpers';\nimport {default as ElementController, ExecuteControllers}  from 'wtc-controller-element';\n\nclass Video extends ElementController {\n  constructor (element, options = {}) {\n    super(element)\n\n    // If set to the wrong node\n    if (!Video.isVideo(element)) {\n      console.warn('The node \\n', element, '\\n is not a video.')\n      return\n    }\n\n    this.options = {\n      fullscreen: (this.element.getAttribute('data-fullscreen') == 'true') ? true : false,\n      onLoad: null\n    }\n\n    if (options) {\n      this.options = _u.extend(this.options, options);\n    }\n\n    this.wrapper = document.createElement('div')\n    this.wrapper.appendChild(this.element)\n    _u.addClass('video-wrapper', this.wrapper)\n\n    let parent = this.element.parentNode\n    console.log(parent)\n    // this.element.parentNode.replaceChild(this.element, this.wrapper)\n  }\n\n  static getTagName(el) {\n    return el.tagName.toLowerCase();\n  }\n\n  static isVideo(el) {\n    return (Video.getTagName(el) === 'video') ? true : false;\n  }\n\n  static preload(item, callback) {\n    let videoTag = item;\n\n    if (callback) {\n      if (videoTag.readyState >= videoTag.HAVE_ENOUGH_DATA) {\n        callback(item);\n      }\n      else {\n        let handler = function(){\n          callback(item);\n          videoTag.removeEventListener('canplay', handler);\n        }\n\n        videoTag.addEventListener('canplay', handler)\n      }\n    }\n\n    videoTag.load()\n  }\n}\n\nExecuteControllers.registerController(Video, 'Video');\n\nexport default Video;\n\nExecuteControllers.instanciateAll();\n"]}